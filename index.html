<!DOCTYPE html>
<html lang="en" id="main-html">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Old Paper Upload System</title>
    <link rel="icon" type="image/png" href="https://cdn-icons-png.flaticon.com/512/3135/3135715.png">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">
    <style>
        /* CSS 样式省略，保持原有样式 */
    </style>
</head>
<body>
    <!-- 导航栏和其他 HTML 代码省略 -->
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // 当前选择状态
        let currentGrade = null, currentSubject = null, currentTerm = null, currentYear = null;
        let currentLang = 'en';

        // 净化用户输入显示的函数
        function escapeHtml(unsafe) {
            return unsafe
                .replace(/&/g, "&amp;")
                .replace(/</g, "&lt;")
                .replace(/>/g, "&gt;")
                .replace(/"/g, "&quot;")
                .replace(/'/g, "&#039;");
        }

        // 更新论文列表的标题时使用净化
        function updatePaperListHeader() {
            const gradeNames = {
                // 原有定义
            };
            const subjectNames = {
                // 原有定义
            };
            const termNames = {
                // 原有定义
            };

            const gradeText = escapeHtml(gradeNames[currentGrade][currentLang]);
            const subjectText = escapeHtml(subjectNames[currentSubject][currentLang]);
            const termText = escapeHtml(termNames[currentTerm][currentLang]);
            const yearText = escapeHtml(currentYear);

            document.getElementById('paper-list-header').textContent = 
                `${gradeText} / ${subjectText} / ${termText} / ${yearText}`;
        }

        // 加载论文时显示占位消息
        function loadPapers() {
            const paperListBody = document.getElementById('paper-list-body');

            paperListBody.innerHTML = `
                <div class="no-papers">
                    <i class="bi bi-file-earmark-text" style="font-size: 3rem; color: #ccc; margin-bottom: 1rem;"></i>
                    <p>${escapeHtml('没有找到符合条件的试卷。成为第一个上传者吧！')}</p>
                </div>
            `;
        }

        // 更新选择和显示论文的函数
        function showPaperList() {
            updatePaperListHeader();
            loadPapers();
            document.getElementById('paper-list').style.display = 'block';
            document.getElementById('paper-list').scrollIntoView({ 
                behavior: 'smooth',
                block: 'start'
            });
        }

        // API 调用示例（如果有的话）
        function fetchData() {
            fetch('https://your-api-endpoint.com/data', {
                method: 'GET',
                headers: {
                    'Authorization': 'Bearer ' + yourToken // 添加身份验证令牌（如果需要）
                }
            })
            .then(response => response.json())
            .then(data => {
                // 处理数据
            })
            .catch(error => {
                console.error('Error:', error);
            });
        }

        // 其他函数省略，例如选择级别、科目、学期和年份的功能
        
        document.addEventListener('DOMContentLoaded', function() {
            // 初始化
            changeLang('en');
            updateStepIndicators();
        });
    </script>
</body>
</html>